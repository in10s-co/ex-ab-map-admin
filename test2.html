<html>
<head>
    <style>
        /* 주요 색상을 변수로 선언 */
        :root {
            --main-color: #7165E3;
            --sub-color: #8B80F8;
            --light-color: #E4DFFF;
            --bg-color: #F5F6FA;
        }

        /* body의 배경색과 폰트 설정 */
        body {
            background-color: var(--bg-color);
            font-family: Arial, sans-serif;
        }

        /* 테이블의 스타일 설정 */
        table {
            border-collapse: collapse;
            width: 80%;
            margin: 20px auto;
        }

        /* 테이블의 헤더 셀의 스타일 설정 */
        th {
            background-color: var(--main-color);
            color: white;
            padding: 10px;
        }

        /* 테이블의 일반 셀의 스타일 설정 */
        td {
            border: 1px solid var(--light-color);
            padding: 10px;
            text-align: center;
        }

        /* 테이블의 홀수 줄의 배경색 설정 */
        tr:nth-child(odd) {
            background-color: var(--light-color);
        }

        /* 테이블의 짝수 줄의 배경색 설정 */
        tr:nth-child(even) {
            background-color: white;
        }

        /* 테이블의 선택된 줄의 배경색 설정 */
        tr.selected {
            background-color: var(--sub-color);
        }

        /* 테이블의 선택된 줄의 하이라이트된 텍스트 색상 설정 */
        tr.selected span.highlight {
            color: var(--main-color);
            font-weight: bold;
        }

        /* 테이블의 체크박스의 스타일 설정 */
        input[type=checkbox] {
            transform: scale(1.5);
        }

        /* 테이블의 플러스 아이콘의 스타일 설정 */
        i.fa-plus {
            color: var(--main-color);
            cursor: pointer;
        }

        /* 모달창의 스타일 설정 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        /* 모달창의 내용의 스타일 설정 */
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid var(--main-color);
            border-radius: 10px;
            width: 80%;
        }

        /* 모달창의 닫기 버튼의 스타일 설정 */
        .close {
            color: var(--main-color);
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        /* 모달창의 닫기 버튼의 호버 스타일 설정 */
        .close:hover,
        .close:focus {
            color: var(--sub-color);
            text-decoration: none;
            cursor: pointer;
        }

        /* 모달창의 라디오 버튼의 스타일 설정 */
        input[type=radio] {
            transform: scale(1.5);
        }

        /* 모달창의 입력 박스의 스타일 설정 */
        input[type=text] {
            width: 80%;
            padding: 10px;
            border: 1px solid var(--main-color);
            border-radius: 5px;
        }

        /* 모달창의 버튼의 스타일 설정 */
        button {
            width: 100px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: var(--main-color);
            color: white;
            cursor: pointer;
        }

        /* 모달창의 버튼의 호버 스타일 설정 */
        button:hover {
            background-color: var(--sub-color);
        }

        /* 트리구조의 스타일 설정 */
        .tree {
            margin: 20px auto;
            width: 80%;
        }

        /* 트리구조의 노드의 스타일 설정 */
        .node {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        /* 트리구조의 노드의 텍스트의 스타일 설정 */
        .node-text {
            margin-left: 10px;
            font-size: 18px;
        }

        /* 트리구조의 노드의 텍스트의 필수 색상 설정 */
        .node-text.required {
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 선택 색상 설정 */
        .node-text.optional {
            color: var(--sub-color);
        }

        /* 트리구조의 노드의 텍스트의 하이라이트 색상 설정 */
        .node-text.highlight {
            color: var(--main-color);
            font-weight: bold;
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted {
            text-decoration: line-through;
            color: gray;
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.optional {
            text-decoration: line-through;
            color: var(--sub-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.optional.highlight {
            text-decoration: line-through;
            color: var(--sub-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.optional.highlight {
            text-decoration: line-through;
            color: var(--sub-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.optional.highlight {
            text-decoration: line-through;
            color: var(--sub-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

                /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted {
            text-decoration: line-through;
            color: gray;
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.optional {
            text-decoration: line-through;
            color: var(--sub-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.required.highlight {
            text-decoration: line-through;
            color: var(--main-color);
        }

        /* 트리구조의 노드의 텍스트의 취소선 스타일 설정 */
        .node-text.deleted.optional.highlight {
            text-decoration: line-through;
            color: var(--sub-color);
        }
    </style>
</head>
<body>
    <!-- 채용공고의 segment를 radio type 선택하는 부분 -->
    <div class="segment-select">
        <h1>채용공고의 segment를 선택하세요.</h1>
        <form id="segment-form">
            <input type="radio" id="segment1" name="segment" value="segment1">
            <label for="segment1">segment1</label>
            <input type="radio" id="segment2" name="segment" value="segment2">
            <label for="segment2">segment2</label>
            <input type="radio" id="segment3" name="segment" value="segment3">
            <label for="segment3">segment3</label>
            <input type="radio" id="segment4" name="segment" value="segment4">
            <label for="segment4">segment4</label>
            <input type="radio" id="segment5" name="segment" value="segment5">
            <label for="segment5">segment5</label>
            <button type="button" id="search-btn">조회</button>
        </form>
    </div>

    <!-- 채용공고의 list가 table 형태로 노출되는 부분 -->
    <div class="job-list">
        <h1>채용공고 목록</h1>
        <table id="job-table">
            <thead>
                <tr>
                    <th>역량map test 작성 여부</th>
                    <th>채용공고 제목</th>
                    <th>기업명</th>
                    <th>primary key</th>
                </tr>
            </thead>
            <tbody>
                <!-- 여기에 ajax로 받은 채용공고 데이터를 동적으로 추가 -->
            </tbody>
        </table>
    </div>

    <!-- 채용공고를 선택하면 자세히 보여주는 모달창 -->
    <div id="job-modal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h1>채용공고 상세보기</h1>
            <div id="job-detail">
                <!-- 여기에 선택한 채용공고의 데이터를 동적으로 추가 -->
            </div>
            <h2>keyword list</h2>
            <div id="keyword-list">
                <!-- 여기에 우대조건과 지원자격의 keyword를 동적으로 추가 -->
            </div>
            <h2>예상 질문 목록</h2>
            <table id="question-table">
                <thead>
                    <tr>
                        <th>질문 문장</th>
                        <th>필수</th>
                        <th>선택</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 여기에 keyword를 기반으로 받은 예상 질문 데이터를 동적으로 추가 -->
                </tbody>
            </table>
            <button type="button" id="save-btn">저장하기</button>
        </div>
    </div>

    <!-- 질문을 생성하는 모달창 -->
    <div id="question-modal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h1>질문 생성하기</h1>
            <form id="question-form">
                <p>질문 종류를 선택하세요.</p>
                <input type="radio" id="type1" name="type" value="type1">
                <label for="type1">type1</label>
                <input type="radio" id="type2" name="type" value="type2">
                <label for="type2">type2</label>
                <input type="radio" id="type3" name="type" value="type3">
                <label for="type3">type3</label>
                <input type="radio" id="type4" name="type" value="type4">
                <label for="type4">type4</label>
                <input type="radio" id="type5" name="type" value="type5">
                <label for="type5">type5</label>
                <p>질문 key를 입력하세요.</p>
                <input type="text" id="key" name="key" placeholder="예) 페이스북 광고를 운영해본 경험이 있나요?">
                <p>필수/선택을 선택하세요.</p>
                <input type="radio" id="required" name="required" value="required">
                <label for="required">필수</label>
                <input type="radio" id="optional" name="required" value="optional">
                <label for="optional">선택</label>
                <button type="button" id="add-btn">추가하기</button>
            </form>
        </div>
    </div>

    <!-- 트리구조로 키워드별 필수질문과 선택질문을 보여주는 부분 -->
    <div class="tree">
        <h1>역량-경험map</h1>
        <div id="tree-root">
            <!-- 여기에 트리구조의 노드를 동적으로 추가 -->
        </div>
    </div>

    <!-- jquery를 포함하는 script 태그 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

        <!-- ajax로 backend api와 통신하는 script 태그 -->
    <script>
        // 채용공고의 segment를 선택하고 조회 버튼을 클릭했을 때
        $("#search-btn").click(function() {
            // segment-form에서 선택된 segment의 value를 가져옴
            var segment = $("#segment-form input[name=segment]:checked").val();
            // segment가 유효한 값이면
            if (segment) {
                // ajax로 backend api를 get방식으로 호출하고 segment를 파라미터로 전달
                $.ajax({
                    url: "https://backend.api/get_job_list",
                    type: "GET",
                    data: {segment: segment},
                    dataType: "json",
                    success: function(data) {
                        // 성공적으로 채용공고의 list를 받았으면
                        if (data) {
                            // job-table의 tbody를 비움
                            $("#job-table tbody").empty();
                            // data의 각 요소에 대해
                            $.each(data, function(index, item) {
                                // item의 역량map test 작성 여부, 채용공고 제목, 기업명, primary key를 변수로 저장
                                var test = item.test;
                                var title = item.title;
                                var company = item.company;
                                var pk = item.pk;
                                // job-table의 tbody에 새로운 행을 추가하고 각 셀에 변수의 값을 넣음
                                $("#job-table tbody").append(
                                    "<tr>" +
                                    "<td>" + test + "</td>" +
                                    "<td>" + title + "</td>" +
                                    "<td>" + company + "</td>" +
                                    "<td>" + pk + "</td>" +
                                    "</tr>"
                                );
                            });
                        }
                    },
                    error: function(xhr, status, error) {
                        // 에러가 발생하면 콘솔에 에러 메시지를 출력
                        console.error(error);
                    }
                });
            }
        });

        // job-table의 행을 클릭했을 때
        $("#job-table tbody").on("click", "tr", function() {
            // 클릭한 행의 마지막 셀의 텍스트를 가져옴 (primary key)
            var pk = $(this).find("td:last").text();
            // pk가 유효한 값이면
            if (pk) {
                // ajax로 backend api를 get방식으로 호출하고 pk를 파라미터로 전달
                $.ajax({
                    url: "https://backend.api/get_job_detail",
                    type: "GET",
                    data: {pk: pk},
                    dataType: "json",
                    success: function(data) {
                        // 성공적으로 채용공고의 상세 정보를 받았으면
                        if (data) {
                            // job-modal을 보이게 함
                            $("#job-modal").show();
                            // job-detail을 비움
                            $("#job-detail").empty();
                            // data의 각 요소에 대해
                            $.each(data, function(key, value) {
                                // key와 value를 job-detail에 추가함
                                $("#job-detail").append(
                                    "<p>" + key + ": " + value + "</p>"
                                );
                            });
                        }
                    },
                    error: function(xhr, status, error) {
                        // 에러가 발생하면 콘솔에 에러 메시지를 출력
                        console.error(error);
                    }
                });
            }
        });

        // job-modal의 닫기 버튼을 클릭했을 때
        $("#job-modal .close").click(function() {
            // job-modal을 숨김
            $("#job-modal").hide();
        });

        // job-modal의 저장하기 버튼을 클릭했을 때
        $("#save-btn").click(function() {
            // job-modal에서 primary key를 가져옴
            var pk = $("#job-detail p:last").text().split(": ")[1];
            // pk가 유효한 값이면
            if (pk) {
                // ajax로 backend api를 post방식으로 호출하고 pk를 파라미터로 전달
                $.ajax({
                    url: "https://backend.api/save_job",
                    type: "POST",
                    data: {pk: pk},
                    dataType: "json",
                    success: function(data) {
                        // 성공적으로 채용공고를 저장했으면
                        if (data) {
                            // job-modal을 숨김
                            $("#job-modal").hide();
                            // alert창으로 저장 완료 메시지를 보여줌
                            alert("채용공고를 저장했습니다.");
                        }
                    },
                    error: function(xhr, status, error) {
                        // 에러가 발생하면 콘솔에 에러 메시지를 출력
                        console.error(error);
                    }
                });
            }
        });
    </script>
</body>
</html>